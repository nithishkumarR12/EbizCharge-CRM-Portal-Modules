<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_ebizcharge_instance_config_form" model="ir.ui.view">
        <field name="name">ebizcharge.instance.config.form</field>
        <field name="model">ebizcharge.instance.config</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group id="header_left_group">
                            <label class="fw-bolder" for="name" string="Merchant Account"/>
                            <field name="name" nolabel="1" placeholder="EBizCharge Gateway Setup Name" required="1" string="Merchant Account"/>
                            <label class="fw-bolder" for="ebiz_user_id" string="User ID"/>
                            <field name="ebiz_user_id" nolabel="1" placeholder="User ID" required="1"/>
                            <label class="fw-bolder" for="company_ids" string="Companies"/>
                            <field domain="[('is_selected', '=', False)]" name="company_ids" nolabel="1" options="{'no_create': True, 'no_open': True, 'no_quick_create': True}" string="Companies" widget="many2many_tags"/>
                        </group>
                        <group id="header_right_group">
                            <label class="fw-bolder" for="ebiz_security_key" string="Security Key"/>
                             <field name="ebiz_security_key" widget="security_field_masking" nolabel="1" placeholder="Security ID" required="1"/>
                            <label class="fw-bolder" for="ebiz_password" string="Password"/>
                            <field name="ebiz_password" nolabel="1" password="1" placeholder="Password" required="1"/>
                            <label class="fw-bolder" for="is_active" string="Is Active"/>
                            <field name="is_active" nolabel="1" widget="boolean_toggle"/>
                            <div class="o_row" colspan="2">
                                <label class="fw-bolder" for="is_default" string="Is Default"/>
                                <widget name="help_popover_widget" width="20px"/>
                                <div style="margin-right:80%;">
                                    <field class="mr-4" context="{'from_is_default': True}" widget="boolean_toggle_ebiz" name="is_default" nolabel="1"/>
                                </div>
                            </div>
                        </group>
                    </group>
                    <field invisible="1" name="is_valid_credential" widget="boolean_toggle"/>
                    <group invisible="1">
                        <field name="merchant_data" string="Allow ACH"/>
                        <field name="is_emv_pre_auth"/>
                        <field name="use_econnect_transaction_receipt"/>
                        <field name="merchant_card_verification"/>
                        <field name="verify_card_before_saving"/>
                        <field name="use_full_amount_for_avs"/>
                        <field name="allow_credit_card_pay"/>
                        <field name="enable_cvv"/>
                        <field name="is_surcharge_enabled"/>
                        <field name="surcharge_type_id"/>
                        <field name="surcharge_percentage"/>
                        <field name="surcharge_caption"/>
                        <field name="surcharge_terms"/>
                        <field name="batch_terms"/>
                    </group>
                    <notebook>
                       <page string="General Settings">
                            <h3>Sync Settings</h3>
                            <h6 class="text-muted">Uploading to the EBizCharge Hub</h6>
                            <div class="row mt16 o_settings_container">
                                <div class="col-12 col-lg-12 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="ebiz_auto_sync_customer"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="ebiz_auto_sync_customer"/>
                                        <div class="text-muted">
                                            Automatically upload customers as they are created or modified
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-12 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="ebiz_auto_sync_invoice"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="ebiz_auto_sync_invoice"/>
                                        <div class="text-muted">
                                            Automatically upload invoices as they are created or modified.
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-12 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="ebiz_auto_sync_sale_order"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="ebiz_auto_sync_sale_order"/>
                                        <div class="text-muted">
                                            Automatically upload sales orders as they are created or modified
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-12 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="ebiz_auto_sync_products"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="ebiz_auto_sync_products"/>
                                        <div class="text-muted">
                                            Automatically upload products as they are created or modified
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-12 o_setting_box">
                                    <div class="o_setting_left_pane">
                                        <field name="ebiz_auto_sync_credit_notes"/>
                                    </div>
                                    <div class="o_setting_right_pane">
                                        <label for="ebiz_auto_sync_credit_notes"/>
                                        <div class="text-muted">
                                            Automatically upload credit notes as they are created or modified
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <h3>Document Download</h3>
                            <div class="row mt16 o_settings_container oe_hidden">
                                <div class="col-12 col-lg-6 o_setting_box">
                                    <div class="o_setting_left_pane"/>
                                    <div class="o_setting_right_pane">
                                        <label for="ebiz_document_download_range"/>
                                        <div class="text-muted">
                                            <field name="ebiz_document_download_range"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                           <br/>
                            <h2>Scheduled Actions Settings</h2>
                            <field invisible="1" name="scheduler_act_deact"/>
                            <div class="col-12 col-lg-12 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="invoice_cron_job"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="invoice_cron_job"/>
                                    <div class="text-muted">
                                        Schedule received payments to automatically apply.
                                    </div>
                                </div>
                            </div>
                            <br/>
                           <h3 class="d-none">Sales Order Payments</h3>
                            <div class="col-12 col-lg-12 o_setting_box d-none">
                                <div class="o_setting_left_pane">
                                    <field name="apply_sale_pay_inv" widget="boolean_toggle" nolabel="1"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <div class="text-muted">
                                        Apply sales order payments during invoice conversion.
                                    </div>
                                </div>
                            </div>

                        </page>

                        <page string="Transaction Settings">
                            <h3>eCommerce Orders</h3>
                            <div class="text-muted">
                                Default Checkout Transaction Type
                            </div>

                            <field name="ebiz_website_allowed_command" nolabel="1" widget="radio"/>
                            <br/>
                            <h3>Quotations &amp; Orders Settings</h3>
                            <div class="col-12 col-lg-12 o_setting_box">
                                <div>
                                    <div class="text-muted">
                                        Default Payment Transaction Type
                                    </div>
                                    <div>
                                       <field name="transaction_type" widget="radio" nolabel="1"/>
                                    </div>
                                </div>

                            </div>
<!--                            <h3>Email Pay for Sales Orders</h3>-->
<!--                            <div class="col-12 col-lg-12 o_setting_box">-->
<!--                                <div>-->
<!--                                    <div class="text-muted">-->
<!--                                        Default Payment Request Type-->
<!--                                    </div>-->
<!--                                    <div>-->
<!--                                       <field name="email_pay_sale" widget="radio" nolabel="1"/>-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                            </div>-->
                            <br/>
                            <h3>Generate Payment Links for Invoices</h3>
                            <div class="col-12 col-lg-12 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="invoice_auto_gpl" widget="boolean_toggle" nolabel="1"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <div class="text-muted">
                                        Auto Generate Links for Invoices
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <h3>Generate Payment Links for Sales Orders</h3>
                            <div class="col-12 col-lg-12 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="sales_auto_gpl" widget="boolean_toggle" nolabel="1"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <div class="text-muted">
                                        Auto Generate Links for Sales Orders
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-lg-12 o_setting_box">
                                <div>
                                    <div class="text-muted">
                                        Default Payment Transaction Type
                                    </div>
                                    <div>
                                       <field name="gpl_pay_sale" widget="radio" nolabel="1"/>
                                    </div>
                                </div>

                            </div>

                        </page>

                          <page string="EMV Device Settings">
                            <h3>EMV Configuration</h3>
                            <form string="EMV Configuration">
                                <group>
                                    <group>
                                        <field name="is_emv_enabled" invisible="1"/>
                                        <field name="source_key" widget="eb_device_field_masking" />
                                        <field name="pin" password="True" />
                                    </group>
                                </group>
                            </form>
                            <div class="row">
                                <h3 class="col-10 text-left ">EMV Device List</h3>
                            <div align="right">
                                <button   name="action_configure_device" class="oe_highlight" string="CONFIGURE DEVICE" style="float: right;" type="object"/>
                            </div>
                            <button special="cancel" readonly="1" invisible="pin != False and source_key != False"
                                    string="CONFIGURE DEVICE"
                                    class="boe_highlight  col-2 right_alignment"  style="right_alignment" />
                            </div>
                            <field name="emv_device_ids" widget="one2many" invisible="not emv_device_ids">
                                <list editable="bottom" create="0" edit="0" delete="0" readonly="1">
                                    <field name="is_default_emv" widget="boolean_toggle" readonly="1"/>
                                    <field name="name" readonly="1"/>
                                    <field name="status" readonly="1"/>
                                    <field name="source_key" widget="eb_device_field_masking" readonly="1" />
                                    <button aria-label="Delete row 1" class="fa fa-trash-o" name="action_delete" type="object"/>
                                    <button class="fa fa-pencil" name="open_edit" title="Edit" type="object" />
                                </list>
                            </field>
                            <div invisible="emv_device_ids">
                                <div>
                                    <div>
                                        <hr class="mt4 mb4"/>
                                        <div class="o_nocontent_help">
                                            <p class="o_view_nocontent_smiling_face">
                                                No Device(s) found.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </page>

                    </notebook>

                </sheet>
            </form>
        </field>
    </record>

    <record id="view_ebizcharge_instance_config_search" model="ir.ui.view">
        <field name="name">ebizcharge.instance.config.view.search</field>
        <field name="model">ebizcharge.instance.config</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <filter domain="[('is_active', '=', True)]" name="is_active" string="Active"/>
                <filter domain="[('is_active', '=', False)]" name="is_active" string="Inactive"/>
            </search>
        </field>
    </record>

    <record id="view_ebizcharge_instance_config_tree" model="ir.ui.view">
        <field name="name">ebizcharge.instance.config.tree</field>
        <field name="model">ebizcharge.instance.config</field>
        <field name="arch" type="xml">
            <list js_class="hide_tooltip">
                <field name="is_default" readonly="1" widget="boolean_toggle"/>
                <field name="is_active" readonly="1" widget="boolean_toggle"/>
                <field name="name"/>
                <field name="ebiz_security_key" widget="security_field_masking" />
                <field name="company_ids" widget="many2many_tags"/>
            </list>
        </field>
    </record>

    <record id="action_ebizcharge_instance_config" model="ir.actions.act_window">
        <field name="name">EBizCharge Merchant Account Setup</field>
        <field name="res_model">ebizcharge.instance.config</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'is_check': True}</field>
        <field name="view_id" ref="payment_ebizcharge_crm.view_ebizcharge_instance_config_tree"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create an EBizCharge Gateway Setup
            </p>
        </field>
    </record>

    <menuitem groups="base.group_system" id="menu_ebiz_general_settings" name="Settings" parent="ebizcharge_menu_root" sequence="7"/>
    <menuitem action="payment_ebizcharge_crm.action_ebizcharge_config_settings" id="ebizcharge_settings_menu" name="Scheduler Settings" parent="payment_ebizcharge_crm.menu_ebiz_general_settings" sequence="1"/>
    <menuitem action="action_ebizcharge_instance_config" id="ebizcharge_instance_config_menu" name="EBizCharge Merchant Account Setup" parent="payment_ebizcharge_crm.menu_ebiz_general_settings" sequence="2"/>

</odoo>
