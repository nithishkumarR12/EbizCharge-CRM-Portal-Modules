<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="ebizcharge_emv_device_tree_view" model="ir.ui.view">
            <field name="name">ebizcharge.emv.device.tree</field>
            <field name="model">ebizcharge.emv.device</field>
            <field name="arch" type="xml" >
                <list string="emv_dev_tree"  create="0" edit="0" delete="0">
                    <field name="name"/>
                    <field name="is_default_emv" string="Is Default"  widget="boolean_toggle" />
                </list>
            </field>
        </record>

        <record id="ebizcharge_emv_form_view" model="ir.ui.view">
            <field name="name">view.ebizcharge.emv.form</field>
            <field name="model">ebizcharge.emv.device</field>
            <field name="arch" type="xml">
                <form string="emv_form" >
                    <sheet>
                        <group>
                            <group>
                                <field name="name" readonly="1"/>
                                <field name="pin" readonly="1" password="1"/>
                                <field name="source_key" widget="eb_device_field_masking" />
                                <field name="is_default_emv"/>
                                <field name="status" readonly="1"/>
                            </group>
                            <group>
                                <field name="merchant_id" invisible="1"/>
                                <field name="key" invisible="1"/>
                                <field name="apikeyid" invisible="1"/>
                                <field name="enable_emv" invisible="1"/>
                                <field name="clientip" invisible="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <!--        For Invoice Emv Device Transaction-->
        <record id="ebizcharge_emv_device_transaction_form_view" model="ir.ui.view">
            <field name="name">emv.device.transaction</field>
            <field name="model">emv.device.transaction</field>
            <field name="arch" type="xml">
                <form string="emv_form" create="0" edit="0" delete="0">
                    <header>
<!--                        <button name="action_create_payment" string="Create Payment" class="oe_highlight"-->
<!--                                type="object" data-hotkey="q"/>-->
                        <button name="action_post" string="Send Request" class="oe_highlight"
                                type="object" invisible="state != 'draft'" data-hotkey="q"/>
                        <button name="action_check"
                                type="object"
                                string="Check"
                                class="oe_highlight"
                                invisible="state != 'sent'"
                                data-hotkey="y"/>
                        <button name="action_cancel"
                                type="object"
                                string="Cancel"
                                data-hotkey="y"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,sent,approve,cancel"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="devicekey"/>
                                <field name="partner_id" invisible="1"/>
                                <field name="pin"/>
                                <field name="seed"/>
                                <field name="email_sent"/>

                                <field name="command"/>
                                <field name="amount"/>
                                <field name="block_offline"/>
                                <field name="ignore_duplicate"/>
                                <field name="save_card"/>
                                <field name="manual_key"/>
                                <field name="prompt_tip"/>
                            </group>
                            <group>
                                <field name="invoice"/>
                                <field name="invoice_id"/>
                                 <field name="sale_id"/>
                                <field name="description"/>
                                <field name="ponum"/>
                                <field name="orderid"/>
                                <field name="description"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Transaction Lines" name="inv_emv_device_transaction">
                                <field name="emv_device_ids" widget="one2many">
                                    <list string="Components" editable="bottom">
                                        <field name="name"/>
                                        <field name="description"/>
                                        <field name="qty"/>
                                        <field name="cost"/>
                                        <field name="list_price" optional="show"/>
                                        <field name="sku" optional="show"/>
                                        <field name="commoditycode" optional="hide"/>
                                        <field name="discountamount" optional="hide"/>
                                        <field name="discountrate" optional="hide"/>
                                        <field name="taxable" optional="hide"/>
                                        <field name="taxamount" optional="hide"/>
                                        <field name="price_unit" optional="hide"/>
                                        <field name="price_subtotal" optional="hide"/>
                                    </list>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="ebizcharge_emv_device_transaction_tree_view" model="ir.ui.view">
            <field name="name">emv.device.transaction.tree</field>
            <field name="model">emv.device.transaction</field>
            <field name="arch" type="xml" >
                <list string="emv_tree"  create="0" edit="0" delete="0">
                    <field name="devicekey"/>
                    <field name="command"/>
                    <field name="amount"/>
                    <field name="invoice"/>
                    <field name="state"/>
                </list>
            </field>
        </record>
        <record id="ebizcharge_emv_device_transaction_action_view" model="ir.actions.act_window">
            <field name="name">EMV</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">emv.device.transaction</field>
            <field name="view_mode">list,form</field>
        </record>
        <menuitem action="ebizcharge_emv_device_transaction_action_view" id="ebizcharge_inv_emv_device_menu"
                  name="EMV Device Transaction" parent="account.root_payment_menu"
                  sequence="3"/>
        <menuitem action="ebizcharge_emv_device_transaction_action_view" id="ebizcharge_so_emv_device_menu"
                  name="EMV Device Transaction" parent="sale.payment_menu"
                  sequence="3"/>

    </data>
</odoo>
